---
title: "hw1"
author: "Aleksey Shadrunov, M. Emelyanenko, A. Podolskaya"
date: "2/21/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## hw1
Выбрали датасет, загрузили csv в tibble:
```{r cars}
data <- read.csv("countries.csv")
data %>% head(10) 
```
будем исследовать колонки:  

* "Country",
* "Area",
* "GDP",
* "Birthrate",
* "Deathrate"  

```{r}
data_f <- data %>%
    select("Country",
           "Area",
           "GDP",
           "Birthrate",
           "Deathrate")
```

очистим датасет от NA-значений, пустых значений и сохраним в формат RDS:
```{r}
data_clean <- data_f %>% 
    drop_na() %>% 
    filter(Birthrate != "", 
           Deathrate != "")
data_clean %>% saveRDS("clean.RDS")
```
проверим типы данных в колонках:
```{r}
summary(data_clean)
```
видим, что в столбце Country хранятся символы, в остальных -- числа. 

вычислим переменную "естественный прирост" -- Rate of natural increase (`Increase`):
```{r}
data_mut <- mutate(data_clean, Increase = Birthrate - Deathrate)
data_mut %>% head(10)
```
также вычислим переменную "GDP per Area" -- сколько ВВП приходится на квадратную милю (`GDPpmi`):
```{r}
data_mut <- mutate(data_mut, GDPpmi = GDP / Area)
data_mut %>% head(10)
```

```{r}
data_mut %>% summary()
```

разобьём датасет по тому, наблюдается ли в стране убыль или прирост населения.
```{r}
data_increase <- data_mut %>% filter(Increase > 0) 
data_increase %>% head(10)  
data_decrease <- data_mut %>% filter(Increase <= 0) 
data_decrease %>% head(10)
```
в каждой группе посчитаем медиану и среднее, SD:
```{r}
data_increase$GDPpmi %>% mean()
data_increase$GDPpmi %>% median()
data_increase$GDPpmi %>% sd()

data_decrease$GDPpmi %>% mean()
data_decrease$GDPpmi %>% median()
data_decrease$GDPpmi %>% sd()
```
проанализируем. стандартное отклонение в первой группе (страны с положительным естественным приростом) составляет 195, среднее и медиана ~31 и 0. это позволяет сказать, что данные сильно разбросаны, большая часть наблюдений лежит около нуля, и некоторые сильно выбрасываются вверх, обеспечивая положительное значение среднего.  

во второй группе (страны с отрицательным ЕП) стандартное отклонение 2698, среднее и медиана 551 и 0. опять наблюдаем большой разброс, большая часть наблюдений так же лежит около нуля. 

сравнивая две группы, можно сказать, что среднее во второй группе больше среднего в первой группе, в то же время медианы у двух групп совпадают, что позволяет сделать вывод о том, что в обеих группах есть страны как с большими, так и с маленькими показателями. при этом значительное с.к.о. (в пять раз превышающее среднее значение) не позволяет делать выводы однозначно.

сохраним датасет:
```{r}
data_mut %>% saveRDS("modified.RDS")
```
